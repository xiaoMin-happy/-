# IP代理

## 一. IP被封问题

### 1. 原因

网站会有反爬机制，同一个IP地址的大量同类型访问，会封锁IP，过一段时间后，才能继续访问

### 2. 解决策略

1. 修改请求头，模拟浏览器访问（而不是代码直接访问）
2. 采用代理IP并轮换
3. 设置访问时间间隔

## 二、IP代理

### 1. 怎么在ip被封之后实现自动更换代理池内的代理？

用random.choice 随机选取ip

### 2. 构建好代理池后，如何在一次爬虫中自动切换代理？ 比如代理无效，或者代理ip被封，这时自动切换下一个ip。

首先你要有一个ip代理池（如果比较豪可以自己买真实ip自行搭建，好处独享有技术门槛,或者找第三方ip代理商对接,好吃廉价,但ip不独享），真实ip需要自己写程序来代理转发，第三方ip代理商则会提供相关转发API,直接调用就可以，这东西没什么技术难度

###  3. ip_list.append(f'{protpcol}://{ip}:{port}')这里的f是格式化？

- 从代理ip网站爬取ip地址及端口号并储存
- 验证ip是否能用
- 格式化ip地址
- 在requests中使用代理ip爬取网站



